var cWin = Ti.UI.currentWindow;

var noPointWin = Ti.UI.createWindow({
  backgroundColor: "#fff"
});


var style = Ti.UI.iPhone.ActivityIndicatorStyle.DARK;

var theIndicator = Ti.UI.createActivityIndicator({
	color: 'black',
	font: {fontSize: 22, fontFamily: "AmericanTypewriter", fontWeight: "bold"},
	message: 'Showing House History....',
	style:style,
	center: 0,
	height:Ti.UI.SIZE,
	width:Ti.UI.SIZE
});
noPointWin.add(theIndicator);


noPointWin.addEventListener('open', function (e) {
  theIndicator.show();
  setTimeout(function(){
    e.source.close();
    theIndicator.hide();
  }, 4000);
});


var bar1 = Titanium.UI.createButtonBar({
    labels:['Stark', 'Lannister'],
    backgroundColor:'#fff',
    top:0,
    style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
    height:25,
    width:175
});

bar1.addEventListener('click', function(){
	//House Windows
	var starkWin = Ti.UI.createWindow({
		title: 'House Stark',
		font: {fontSize: 18, fontFamily: "AmericanTypewriter"},
		backgroundImage: houseEvent.source.housePicture,
		backgroundColor: "#252525"
	});	
	
	var lannWin = Ti.UI.createWindow({
		title: 'House Lannister',
		font: {fontSize: 18, fontFamily: "AmericanTypewriter"},
		backgroundImage: houseEvent.source.housePicture,
		backgroundColor: "#252525"
	});	
	
	//House Views
	var starkView = Ti.UI.createView({
		backgroundImage: "new/stark.png",
		height: Ti.UI.FIT
	});

	var starkLabel = Ti.UI.createLabel({
		text: 'You have chosen House Stark! Congradulations!!!. If you do not sense my sarcasm, read the books. It will become clear to you.',
		font: {fontSize: 14, fontFamily: "AmericanTypewriter", fontWeight: "bold", fontColor: "#000"},
		bottom: 80
	});
	starkView.add(starkLabel);
	starkWin.add(starkView);
	
	var lannView = Ti.UI.createView({
		backgroundImage: "new/lannister.png",
		height: Ti.UI.FIT,
	});

	var lannLabel = Ti.UI.createLabel({
		text: "You have chosen House Lannister! Congradulations!!!. You are wise and rich beyond your dreams. Don't spend it all at the Tavern.",
		font: {fontSize: 14, fontFamily: "AmericanTypewriter", fontWeight: "bold", fontColor: "#000"},
		bottom: 80
	});
	lannView.add(lannLabel);
	lannWin.add(lannView);
	
	
	if(bar1.labels === 'Stark'){
		cWin.nav.openWindow(starkWin, {animate: true});
	} else if (bar1.labels === 'Lannister'){
		cWin.nav.openWindow(lannWin, {animate: true});
	};
});



cWin.add(bar1);
cWin.nav.openWindow(noPointWin, {animate: true});
